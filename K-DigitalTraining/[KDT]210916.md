ALB를 하기 위해 cs-edhe-subnet 을 가용영역 c로 변경

cs-web-subnet(가용영역 a)와 함께 해서 ALB를 할 수 있음

### 로드밸런서 실습

수동으로하는법

- 타겟그룹 :

인스턴스 -> HTTP : 80 - register target abailable instance web선택해서 pending하고 타겟그룹넣어줌

하나 더 만들어줌 web-443 http 443 webinstance 팬딩

 

- 로드밸런서 가서 was하나만 있는거 확인 후 로드밸런서 생성

alb생성 -> cs-web-alb -> 인터넷 -> vpc : customer -> 가용영역 둘다 선택 edge, web (edge영역에서 web으로 가라고 라우터작용해주는것임) -> 보안그룹 보면 edge-sg가 디폴트 -> Listeners and route 80,443

로드밸런서 만들어진것 확인

### 방화벽 : 패킷을 막고 시작한다는 것을 기억 -> 네트워크 보안의 시작이며 기본

1세대 방화벽 : 패킷 필터 방화벽

2세대 방화벽 : 세션 처리 방화벽 (웹의 세션 처리) / 스테이트풀 인스펙션

3세대 방화벽 : 애플리케이션 방화벽

세션 : ID, PW를 일회용으로 저장한 다음 시간이 지나면 폐기 / 몇명이 붙을지 알기 때문에 인원만큼(인터넷뱅킹)

쿠키 : 전 세계를 상대로 사람들이 접속하기 때문에 몇명이 붙을지 몰라서 쿠키 사용(네이버, 카카오 등등) 기록남음

### 기능별 분류

패킷필터 방화벽 - 초기버전
프록시
네트워크 주소변환

### 구현방법에 따른 분류

S/W 방화벽
H/W 방화벽
NPU 기반 방화벽
멀티코어 프로세서 방화벽 - 가상화

### 방화벽의 종류

- 스크리닝 라우터

   패킷 분석 : VPC

- 베스천 호스트

   라우터 다음에 안전지대에 신뢰할 수 있는 서버 구성  
   서버를 통해 내부만 접근

- 듀얼 홈 호스트 (베스천 호스트 방식에서 NIC 2개 내부 / 외부 연결) (공유기)  
   베스천 호스트 : 2개 NIC - 프록시 기반(패킷 안함)

- 스크린 호스트

   스크리닝 라우터 + 베스천 호스트  
   외부 스크리닝 라우터 기능이 담당해서 패킷 확인  
   통과 되면 베스천 호스트에서 한 번 더 검사 후 전송  
    ㄴ베스천 호스트는 내부 및 외부 시스템의 인증을 담당  
      : AWS 계정 단위로 함 -> VPC에서 함 - Endpoint -> AWS 계정단위로 할 때 사용  

- 스크린 서브넷 (스크린 호스트 방식의 단점을 보완)  
   스크린 호스트 방식의 단점 보완한 모델  
   ALB Edge 영역을 이용해서 경계 부분 하나 더 구성  

방화벽 - 일단 차단 후 확인 -> 통과

AWS에서 네트워크 방화벽 구성 순서 : 네트워크 방화벽 규칙 그룹 -> 방화벽 정책 -> 방화벽

스크리닝 라우터는 패킷을 분석하기 위해 패킷을 먼저 까서 확인해야 함. 정책을 만들어줘야 하는 것이고 그룹은 어떤 그룹의 규칙을 만들어 줘야 함. 하나씩 통과하는 게 아니라 그룹으로