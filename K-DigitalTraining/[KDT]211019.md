sg -> nacl 순으로 조임

sg -> osi 7 layer에서 6~7번째 계층

nacl -> 3,4계층을 막는것  

nacl에서는 1024-65534 / sg는 안해도됨

AWS 네트워크 방화벽 시작  

 - VPC 선택 : 엔드포인트 생성 후 AWS 네트워크 방화벽과 연결  

   방화벽 : AWS 네트워크 방화벽이 보호할 VPC 선택  

   정책 : 상태 비저장 및 상태 저장 규칙  

    규칙 그룹 : 5튜플 / 도메인 이름으로 필터링 / Suricata 규칙  

vpc의 네트워크 방화벽규칙그룹과 같음

권한때문에 vpc에서 방화벽 만들 것임   

방화벽생성 - 빈방화벽정책 생성및 연결 - 엔드포인트가 자동으로 생성됨  

연결된 방화벽정책규칙그룹 - 상태저장규칙그룹 / 상태비저장규칙그룹  

- IDS / IPS : 침입 탐지 / 침입 방지  

- Internet Gateway, Nat Gateway, VPC, Direct Connec 네트워크 트래픽을 보안 적용  

- Open Source의 IPS -> Suricata 호환 규칙을 지원  

- 방화벽 엔드포인트 In/Out 모니터링, 제어  

- IP주소 / 도메인별 사용  

방화벽 - VPC 연결  

정책 - IN/OUT 필터링 정책을 정의 -엔진 선택  

    상태(Stateful rule) / 비상태(Stateless rule) 정의  

    상태 : 패킷 상태 정보를 기억하고, 정해진 규칙을 검사 후 처리  

    비상태 : 상태 정보와 관계없이 현재 패킷 정보만 규칙을 검사 후 처리  

중요하지않으면 stateless 엔진 방식으로 처리(= nacl)

stateless 방식으로 먼저 처리 후-> 패스, 드롭, 포워드...  

  비상태 - NACL과 같은 효과를 적용하고 Forward 설정(회사 그룹웨어/ERP) 상태 저장 사용  

  상태저장 - Suricata 적용  