지금까지는 게이트웨이 -> 로드밸런서로 연결이 되게 했지만 이제부터는 게이트웨이 -> 나트 -> 로드밸런서로 갈 것  

IDS(Intrusion Detection System) : 침입탐지 시스템  
 ㄴ기계 24시간 확인  
 ㄴ패킷/세션 분석 탐지  
 ㄴ비정상 행동(패턴) 확인 탐지  
 패턴을 알면 쉽게 속이는 것 가능/오탐지율 일정 부분 나옴  

IPS(Intrusion Prevention System) : 침입방지 시스템  
 ㄴ바이러스, 웜, 스팸  
   주기적으로 바이러스 및 스팸 정보를 업데이트 해야 하는 단점  

Firewall : 침입차단 시스템  
- 네트워크 방화벽  
 ㄴ외부의 네트워크 차단 : IP/Port 접근제어 > 네트워크 방화벽
- 응용 프로그램 방화벽  
 ㄴOSI 7 Layer 3~7 계층 3~4 => 네트워크방화벽  
 ㄴ응용프로그램 6~7 계층 : XSS/SQL Injection  
    ㄴ Web Application Firewall : WAF  
 ㄴTCP/IP Layer  
- DoS/DDoS 막아줌  

내부 시스템들의 IP는 숨긴채로 NAT Gateway를 거쳐 10.10.8.x IP를 통해 eip를 거쳐 인터넷을 할 수 있게 됨  
1. 인터넷 게이트웨이 생성 -> 라우트 연결(명시적 서브넷 연결) -> public subnet -> EC2 생성 --> 인터넷 가능  

2. 라우트 테이블 생성(서브넷을 private subnet만 연결 / public(edge) subnet만 연결) ->
    public subnet 연결한 부분은 인터넷 게이트웨이를 통해 나감  

    private subnet 연결한 부분은 인터넷이 안됨 if) 인터넷이 하고싶다면 NAT게이트웨이를 연결해줌(나가는것만 가능, [공유기] / private subnet의 포트 등으로 들어오는건 NAT 인스턴스 사용)  

Bastion Host  
1. Bastion Host EC2 생성 - Bastion Host용 보안그룹 생성(22번포트만 열어줌)   
2. 탄력적 IP 생성 및 연결  
3. EC2 연결-접속  
NACL 22번포트 소스 내 ip로 바꿔줘도 문제없이 접속 가능  
4. pem 키 복사(로컬->원격)  
scp -i "g-ui-key.pem" g-ui-key.pem ubuntu@13.52.122.131:/home/ubuntu  
5. NACL, 보안그룹 수정  

연결 힌트  
라우팅 테이블 서로 연결,,? 퍼블릭 서브넷이 하나가 필요할까 두개가 필요할까,,?  
제일 속편한건 라우팅테이블에서 Public 라우트에 인터넷게이트웨이 연결도 되어있고,  
private라우트에 NAT게이트웨이도 했었으니 퍼블릭라우트에서 원래는 edge subnet만 지정해줬음.  
여기서 쓰고있는 ip 중에 eip할당받은 것만 인터넷이 되지 않을까?  
그렇다면 라우팅 편집에서 내부에 있는 프라이빗서버를 나가게 해주는 nat gateway를 추가해주는 건 어떨까.  
그리고 서브넷 연결할 때 필요한 애들만 연결해주면 어떨까.  
그럼 자기들끼리 라우팅테이블에서 게이트웨이 만들겠지?  
잘 생각해보면 우린 기본을 쓰는게 아니라 내가만든 라우팅테이블을 사용하는 것임.  